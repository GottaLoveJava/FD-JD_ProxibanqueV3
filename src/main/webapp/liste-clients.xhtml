<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui">

<f:metadata>
	<f:event type="preRenderView"
		listener="#{clientControleur.chargerClients()}" />
</f:metadata>

<h:head>

	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<title>Liste des clients</title>

	<h:outputStylesheet library="css" name="bootstrap.min.css" />

</h:head>

<h:body>
	<ui:decorate template="/Template/template.xhtml" />
	<div id="wrapper" class="jumbotron">
		<div id="header">
			<h2>
			Bienvenue
			<h:outputText value="#{request.remoteUser}" /></h2>
		</div>


		<div id="container">

			<div id="content">

				<h:messages globalOnly="true" />

				<h:button value="Ajouter un client à la base de données"
					outcome="ajouter-client-form" />
				<h:button value="Effectuer un virement" outcome="virements" />
				<br />
				<h:form>

					<b:dataTable value="#{clientControleur.clients}" var="tempClient"
						styleClass="demo-table" headerClass="demo-table-header"
						rowClasses="demo-table-odd-row,demo-table-even-row">

						<b:dataTableColumn>
							<!-- the column header -->
							<f:facet name="header">Prénom</f:facet>

							<!--  the value for each row -->
						#{tempClient.prenom}
				</b:dataTableColumn>

						<b:dataTableColumn>
							<!-- the column header -->
							<f:facet name="header">Nom</f:facet>

							<!--  the value for each row -->
						#{tempClient.nom}
				</b:dataTableColumn>

						<b:dataTableColumn>
							<!-- the column header -->
							<f:facet name="header">Email</f:facet>

							<!--  the value for each row -->
						#{tempClient.email}
				</b:dataTableColumn>
						<b:dataTableColumn>
							<!-- the column header -->
							<f:facet name="header">Adresse</f:facet>

							<!--  the value for each row -->
						#{tempClient.adresse}
				</b:dataTableColumn>
						<b:dataTableColumn>
							<!-- the column header -->
							<f:facet name="header">Ville</f:facet>

							<!--  the value for each row -->
						#{tempClient.ville}
				</b:dataTableColumn>

							<b:dataTableColumn>
							<f:facet name="header">Afficher les comptes</f:facet>
							
								<h:commandLink value="Comptes"
									action="#{clientControleur.compteClient(tempClient.id)}" />
							</b:dataTableColumn>
							<b:dataTableColumn>
							<f:facet name="header">MAJ des infos clients</f:facet>
								<h:commandLink value="Modifier"
									action="#{clientControleur.chargerClient(tempClient.id)}" />
							</b:dataTableColumn>

							<b:dataTableColumn>
							<f:facet name="header">Supprimer le client</f:facet>
								<h:commandLink value="Supprimer"
									onclick="if (!confirm('Voulez-vous supprimer ce client?')) return false"
									action="#{clientControleur.supprimerClient(tempClient.id)}" />
							</b:dataTableColumn>
					</b:dataTable>
					<div></div>
				</h:form>

			</div>

		</div>
	</div>

</h:body>
</html>
